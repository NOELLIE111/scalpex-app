# Рабочий процесс с venv и pip

# 1. Активация виртуального окружения

# Способ А (Рекомендуется): В терминале Git Bash / MINGW64
source venv/Scripts/activate

# Способ Б: В терминале PowerShell
# Сначала нужно один раз выполнить команду, чтобы разрешить запуск скриптов:
# Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
# После этого для активации используйте:
# .\venv\Scripts\Activate.ps1

# Для выхода из окружения используйте команду `deactivate`.

# 2. Запуск компонентов для разработки
# (нужно находиться в активированном окружении)

# Способ 1: Вручную, в двух разных терминалах (рекомендуется для отладки)

# В первом терминале:
cd server
python run_bot.py

# Во втором терминале:
cd client
python main.py

# Способ 2: Автоматически, одной командой (удобно для быстрого старта)

# Для Windows (откроет два новых окна):
scripts\start-dev.bat

# Для Linux/macOS/Git Bash (запустит все в одном окне):
./scripts/start-dev.sh

---

# Работа с библиотеками

# 1. Установить новую библиотеку (например, ccxt)
pip install ccxt
# После установки, не забудьте обновить файл зависимостей:
pip freeze > requirements.txt

# 2. Установить новую библиотеку для разработки (например, pre-commit)
pip install pre-commit
# После установки, обновите dev-зависимости:
pip freeze > requirements-dev.txt

# 3. Установить все зависимости из файлов (например, после git pull)
pip install -r requirements.txt
pip install -r requirements-dev.txt

# 4. Удалить библиотеку (например, requests)
pip uninstall requests
# После удаления, не забудьте обновить файл зависимостей:
pip freeze > requirements.txt

---

# Что делать, если `git commit` не проходит? (Pre-commit hooks)

Если при попытке сделать `git commit` вы видите ошибку и сообщение `...Failed`, это значит, что сработали **pre-commit хуки** — автоматические проверки качества кода. **Это хорошо!** Они не дают "грязному" коду попасть в репозиторий.

**Ваши действия:**

1.  **Прочитайте ошибку.** В выводе терминала будет точно указан файл и номер строки, где найдена проблема (например, `E402 Module level import not at top of file`).
2.  **Исправьте код** в указанном файле в соответствии с ошибкой.
3.  **Снова добавьте исправленные файлы** в коммит:
    ```
    git add .
    ```
4.  **Повторите попытку коммита:**
    ```
    git commit -m "feat: Описание новой функциональности"
    ```

Теперь проверки должны пройти успешно.

# Мой рабочий цикл (отправка изменений)

# 1. Подготовить все измененные файлы
git add .

# 2. Сделать локальное сохранение (коммит) с описанием
git commit -m "feat: Описание новой функциональности"

# 3. Отправить свои коммиты на GitHub
git push

---

# Получение изменений от других

# 1. Скачать все последние изменения с GitHub
git pull
# 2. После git pull, если коллеги обновили библиотеки, выполнить:
pip install -r requirements.txt
pip install -r requirements-dev.txt

---

# Сборка финального .exe файла для клиента

# 1. **ВАЖНО:** Сначала перейдите в папку клиента. Команда не сработает из корневой папки.
cd client

# 2. Установите PyInstaller и хуки для Kivy (если они еще не установлены в вашем venv)
pip install pyinstaller pyinstaller-hooks-contrib

# 3. Запустите сборку. Эта команда:
#    --name ScalpEX: Задаст имя файла.
#    --onefile: Упакует все в один .exe.
#    --windowed: Уберет черное окно консоли при запуске.
#    --add-data "main_screen.kv;.": Добавит файл интерфейса внутрь .exe.
pyinstaller --name ScalpEX --onefile --windowed --add-data "main_screen.kv;." main.py

# 4. Готовый файл будет лежать в папке client/dist/
